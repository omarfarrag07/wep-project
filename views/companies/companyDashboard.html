<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Company Dashboard - Flight Booking System</title>
    <link rel="stylesheet" href="../css/companyDashboardStyle.css">
</head>
<body>
    <div class="header">
        <div class="logo">
            <img src="../../images/logo.webp" alt="Company Logo">
            <div class="company-name">FlightCo</div>
        </div>
        <ul>
            <li><a href="companyDashboard.html">Home</a></li>
            <li><a href="addflight.html">Add Flight</a></li>
            <li><a href="messages.html">Messages</a></li>
            <li><a href="CompanyProfile.html">Profile</a></li>
        </ul>
        <button class="logout"><a href="../../backend/logout.php">Logout</a></button>
    </div>
    
    <h2 class="welcome">Welcome to the Company Dashboard</h2>

    <div class="main-content">

        <div class="dashboard-body">
            <div class="section">
                <h2 class="flightList_h2">Flight List</h2>
                <div id="flight-list">
                </div>
            </div>
           

    <script>
        document.addEventListener('DOMContentLoaded', () => {
    const flightListElement = document.getElementById('flight-list');

    fetch('../../backend/companies/companyDashboard.php')
        .then(response => response.json())
        .then(data => {
            if (Array.isArray(data)) {
                data.forEach(flight => {
                    const flightItem = document.createElement('div');
                    flightItem.className = 'flight-item';
                    flightItem.innerHTML = `
                        <p><strong>ID:</strong> ${flight.id}</p>
                        <p><strong>Name:</strong> ${flight.name}</p>
                        <p><strong>Itinerary:</strong> ${flight.itinerary}</p>
                    `;
                    flightListElement.appendChild(flightItem);
                });
            } else {
                flightListElement.innerHTML = `<p>No flights found.</p>`;
            }
        })
        .catch(error => {
            console.error('Error fetching flights:', error);
            flightListElement.innerHTML = `<p>Failed to load flights. Please try again later.</p>`;
        });
});

    </script>
</body>
</html>
