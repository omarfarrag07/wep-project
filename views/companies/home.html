<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home</title>
    <link rel="stylesheet" href="../css/styles.css"> <!-- Common CSS -->
    <link rel="stylesheet" href="home.css"> <!-- Additional CSS -->
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar">
        <div class="navbar-container">
            <a href="home.html" class="navbar-logo">Home</a>
            <ul class="navbar-links">
                <li><a href="profile.html">Profile</a></li>
            </ul>
        </div>
    </nav>

    <!-- Header Section -->
    <header class="welcome-section">
        <div id="company-logo" class="company-logo"></div>
        <h1>Welcome, <span id="company-name">Loading...</span></h1>
    </header>

    <!-- Main Content -->
    <main>
        <div class="content">
            <h1>Welcome to the Home Page</h1>
            <p>This is the homepage where you can navigate to other sections of your website.</p>
        </div>

        <!-- Buttons Section -->
        <div class="button-container">
            <button>
                <a href="addflight.html">Add New Flight ✈️</a>
            </button>
            <button>
                <a href="GetAllFlights.html">View All Flights ✈️</a>
            </button>
        </div>
    </main>

    <!-- JavaScript -->
    <script>
        // Fetch and display company name and logo
        fetch('http://localhost/wep-project/backend/companies/profile.php', {
            method: 'GET',
            credentials: 'include',
        })
        .then(response => response.json())
        .then(data => {
            if (data.error) {
                document.body.innerHTML = `<p><strong>Error:</strong> ${data.error}</p>`;
                return;
            }

            // Display company name
            document.getElementById('company-name').textContent = data.name || 'N/A';

            // Display company photo
            const logoContainer = document.getElementById('company-logo');
            if (data.photo) {
                const timestamp = new Date().getTime(); // Prevent caching
                const img = document.createElement('img');
                img.src = `http://localhost/wep-project/uploads/${data.photo}?t=${timestamp}`;
                img.alt = 'Company Photo';
                img.width = 200; // Adjust the size as needed
                logoContainer.innerHTML = ''; // Clear previous content
                logoContainer.appendChild(img);
            } else {
                logoContainer.innerHTML = '<p>No photo available.</p>';
            }
        })
        .catch(error => {
            document.body.innerHTML = `<p><strong>Error:</strong> ${error.message}</p>`;
        });
    </script>
</body>
</html>
